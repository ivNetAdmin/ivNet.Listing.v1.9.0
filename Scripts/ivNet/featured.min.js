$(document).ready(function () {

    $.ajax({
        url: '/api/listing/featured',
        type: 'GET',
        dataType: 'json',
        success: function (data) {

            var featuredList = $('div.featured-list').find('ul');
     
            $.each(data, function(index, value) {
                
                var rootLi = $('<li/>', {
                    'class': 'col-md-12'
                }).appendTo(featuredList);

                $('<div/>', {
                    'class': 'featured-title',
                    'html': value.Town + ", " + value.Postcode
                }).appendTo(rootLi);

                var anchor = $('<a/>', {
                    'title': 'Click for more info...',
                    'href': '/listing?id=' + value.ListingId
                }).appendTo(rootLi);

                $('<img/>', {
                    'alt': '',
                    'src': value.Url
                }).appendTo(anchor);

                $('<div/>', {
                    'class': 'featured-strapline',
                    'html': unescape(value.StrapLine)
                }).appendTo(rootLi);
            });
        },
        error: function (x, y, z) {
            alert(x + '\n' + y + '\n' + z);
        }
    });
});
