$(document).ready(function () {

    $.ajax({
        url: '/api/listing/carousel',
        type: 'GET',
        dataType: 'json',
        success: function (data) {
            var active = " active";

            var carousel = $('div.carousel-inner');
            var indicators = $('ol.carousel-indicators');

            $.each(data, function(index, value) {

                var rootDiv = $('<div/>', {
                    'class': 'item' + active
                }).appendTo(carousel);

                $('<h3/>', { 'html': unescape(value.Title) }).appendTo(rootDiv);

                $('<img/>', {
                    'alt': '',
                    'src': value.Url
                }).appendTo(rootDiv);

                var captionDiv = $('<div/>', { 'class': 'carousel-caption' }).appendTo(rootDiv);

                $('<h4/>', { 'html': unescape(value.Postcode) }).appendTo(captionDiv);

                $('<p/>', { 'html': unescape(value.StrapLine) }).appendTo(captionDiv);

                
                $('<li/>', {
                    'data-target': '#listingCarousel',
                    'data-slide-to': index,
                    'class': active
                }).appendTo(indicators);

                active = "";
                
            });
            
            $("#listingCarousel").carousel();
        },
        error: function (x, y, z) {
            alert(x + '\n' + y + '\n' + z);
        }
    });

});

/* <li data-target="#myCarousel" data-slide-to="0" class=""></li>
                                <li data-target="#myCarousel" data-slide-to="1" class="active"></li>
                                <li data-target="#myCarousel" data-slide-to="2" class=""></li>*/

/*

<div class="item">
    <h2>Slide 1</h2>
    <img alt="" src="/Media/Default/ListingImages/1/20150703092502.jpg" />
    <div class="carousel-caption">
        <h3>First slide label</h3>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
    </div>
</div>
*/